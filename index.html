<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>⚽ Fußball Anmeldung</title>
<style>
body{font-family:Arial,sans-serif;background:#0b3d0b;color:#fff;padding:20px;}
.container{max-width:700px;margin:auto;}
.card{background:#ffffff22;padding:20px;border-radius:12px;margin-bottom:20px;}
input,select,button{padding:10px;margin:5px 0;border-radius:8px;border:none;font-size:1rem;}
button{background:#ffd700;color:#000;cursor:pointer;font-weight:bold;}
button:hover{background:#ffcc00;}
.hidden{display:none;}
.slot-card{border:1px solid #fff;border-radius:10px;padding:10px;margin:10px 0;}
h1,h2{margin-top:0;text-align:center;}
</style>
</head>
<body>
<div class="container">
<h1>⚽ Fußball Anmeldung</h1>

<!-- Benutzer wählt Zeit-Slot -->
<div id="userDiv" class="card">
  <h2>Benutzer Anmeldung</h2>
  <input type="text" id="userName" placeholder="Name"><br>
  <label for="slotSelect">Wähle Zeit-Slot:</label><br>
  <select id="slotSelect">
    <option value="17-19">17-19 Uhr</option>
    <option value="19-21">19-21 Uhr</option>
  </select><br>
  <button onclick="registerUser()">Anmelden</button>
  <p id="loginError" style="color:red;"></p>
</div>

<!-- Admin Bereich -->
<div id="adminDiv" class="hidden card">
  <h2>Administratorbereich</h2>
  <div id="slots"></div>
  <div class="card">
    <h3>Aufgabe vergeben</h3>
    <select id="assignUserSelect"></select><br>
    <input type="text" id="taskTitle" placeholder="Aufgabe"><br>
    <button onclick="assignTask()">➕ Aufgabe vergeben</button>
  </div>
  <div id="taskList"></div>
</div>
</div>

<script>
const maxPerSlot = 5;
let slots = {
  "17-19": [],
  "19-21": []
};
let tasks = [];

// Benutzer anmelden
function registerUser(){
  const name = document.getElementById("userName").value.trim();
  const slot = document.getElementById("slotSelect").value;
  const errorP = document.getElementById("loginError");
  errorP.innerText="";
  if(!name){ errorP.innerText="Name erforderlich"; return; }
  if(slots[slot].length >= maxPerSlot){ errorP.innerText="Dieser Slot ist voll"; return; }
  slots[slot].push(name);
  document.getElementById("userDiv").classList.add("hidden");
  alert(`Willkommen ${name}! Sie sind für ${slot} Uhr angemeldet.`);
  renderAdmin();
}

// Adminbereich anzeigen
function renderAdmin(){
  document.getElementById("adminDiv").classList.remove("hidden");
  const slotsDiv = document.getElementById("slots");
  slotsDiv.innerHTML="";
  Object.keys(slots).forEach(s=>{
    slotsDiv.innerHTML += `<div class="slot-card"><strong>${s} Uhr:</strong> ${slots[s].join(", ") || "(keine Anmeldung)"}</div>`;
  });
  const assignSelect = document.getElementById("assignUserSelect");
  assignSelect.innerHTML="";
  Object.values(slots).flat().forEach((u,i)=>{
    assignSelect.innerHTML += `<option value="${i}">${u}</option>`;
  });
}

// Aufgabe vergeben
function assignTask(){
  const userIndex = document.getElementById("assignUserSelect").value;
  const title = document.getElementById("taskTitle").value.trim();
  if(!title){ alert("Aufgabe erforderlich"); return; }
  const allUsers = Object.values(slots).flat();
  tasks.push({user: allUsers[userIndex], title});
  document.getElementById("taskTitle").value="";
  renderTasks();
}

// Aufgaben anzeigen
function renderTasks(){
  const taskList = document.getElementById("taskList");
  taskList.innerHTML="";
  tasks.forEach(t=>{
    taskList.innerHTML += `<div class="slot-card"><strong>${t.user}</strong>: ${t.title}</div>`;
  });
}
</script>
</body>
</html>
